<div class="flex flex-col w-full h-[72vh]">
  <div class="flex flex-col flex-grow overflow-auto">
    @for (item of messages(); track item.id) {
    <div class="chat" [class.chat-start]="!item.currentUserSender" [class.chat-end]="item.currentUserSender">
      <div class="chat-image avatar">
        <div class="w-10 rounded-full">
          <img alt="Tailwind CSS chat bubble component" alt="image of user" [src]="item.senderImgUrl" />
        </div>
      </div>
      <div class="chat-header">
        {{item.senderDisplayName}}
        <time class="text-xs opacity-50">{{item.messageSent | date:'short'}}</time>
      </div>
      <div class="chat-bubble">{{item.content}}</div>
      @if (item.currentUserSender && item.dateRead) {
      <div class="chat-footer opacity-50">Seen {{item.dateRead|timeAgo}}</div>
      }@else if (item.currentUserSender && !item.dateRead) {
      <div class="chat-footer opacity-50">Not read</div>
      }
      @else{
      <div class="chat-footer opacity-50">Delivered</div>
      }
    </div>
    }
    <div #messageEndRef></div>
  </div>
  <div class="flex join w-full ">
    <input [(ngModel)]="messageContent" class="input w-full" placeholder="Enter your message"
    (keydown.enter)="sendMessage()">
    <button (click)="sendMessage()" type="submit" class="btn btn-primary join-item">
      Send
    </button>
  </div>
</div>
